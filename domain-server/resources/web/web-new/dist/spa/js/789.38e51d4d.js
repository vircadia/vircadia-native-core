"use strict";(self["webpackChunkvircadia_domain_dashboard"]=self["webpackChunkvircadia_domain_dashboard"]||[]).push([[789],{3789:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Ee});var s=i(3673),a=i(8880),o=i(2323);(0,s.dD)("data-v-adfd497e");const n={id:"firstTimeWizardContainer",class:"window-height window-width"},r={class:"overflow-hidden"},l=(0,s._)("h2",{class:"welcome text-weight-thin"}," Welcome ",-1),c=(0,s._)("div",{class:"text-h7 text-weight-light text-center"},"â¤",-1),d=(0,s._)("div",{class:"text-h6 text-weight-light text-center"},"Let's configure your virtual world.",-1),m=(0,s.Uk)(" Start "),u=(0,s.Uk)(" Skip Wizard "),p=(0,s._)("div",{class:"text-h6 text-weight-light text-center"},"Are you sure you want to skip the wizard?",-1),_=(0,s.Uk)(" No "),h=(0,s.Uk)(" Skip "),w=(0,s._)("div",{class:"text-h6 text-weight-light text-center"},"Import settings and/or content?",-1),f=(0,s._)("div",{class:"text-h7 text-weight-light text-center"},"You can always do this later.",-1),g=(0,s.Uk)(" Import (coming soon) "),v=(0,s.Uk)(" Skip "),y=(0,s.Uk)(" Back "),S=(0,s._)("div",{class:"text-h6 text-weight-light text-center"},"Connect your world to your Metaverse account?",-1),W=(0,s._)("div",{class:"text-h7 text-weight-light text-center"},"This can improve security and discovery for your world.",-1),M=(0,s.Uk)(" Back "),z=(0,s._)("div",{class:"text-h6 text-weight-light text-center"},"Let's give your Domain a label.",-1),k=(0,s._)("div",{class:"text-h7 text-weight-light text-center"},"This is to help you identify your Domains in your Metaverse account.",-1),E=(0,s.Uk)(" Next "),x=(0,s.Uk)(" Back "),b=(0,s._)("div",{class:"text-h6 text-weight-light text-center"},"Let's configure some security settings for your world.",-1),C=(0,s._)("div",{class:"text-h6 text-weight-light text-center"},[(0,s.Uk)("Who should be an "),(0,s._)("b",null,"in-world admin"),(0,s.Uk)(" of your Domain?")],-1),Z=(0,s._)("div",{class:"text-h6 text-weight-light text-center"},[(0,s.Uk)("Who can "),(0,s._)("b",null,"connect"),(0,s.Uk)(" to your Domain?")],-1),T=(0,s._)("div",{class:"text-h6 text-weight-light text-center"},[(0,s.Uk)("Who can "),(0,s._)("b",null,"rez"),(0,s.Uk)(" items in your Domain?")],-1),A=(0,s.Uk)(" Next "),D=(0,s.Uk)(" Back "),V=(0,s._)("div",{class:"text-h6 text-weight-light text-center"},"Let's create a username and password for your Domain's administrator web panel.",-1),R=(0,s._)("div",{class:"text-h7 q-mt-sm text-weight-light text-center"},"Warning: Immediately after saving the credentials, you will be prompted to enter them into your browser to continue.",-1),U={align:"right"},q=(0,s.Uk)(" Skip "),L=(0,s.Uk)(" Back "),I=(0,s._)("div",{class:"text-h6 text-weight-light text-center"},"Enable high performance mode?",-1),$=(0,s._)("div",{class:"text-h7 text-weight-light text-center"},"If you are hosting this Domain on your local computer and it is not very powerful, then consider leaving this off because the server will use more resources if it's busy, thereby slowing down your computer. If you are running this server on a powerful system (or a remote server) and intend to have a large audience, then turn this setting on.",-1),P=(0,s.Uk)(" Next "),O=(0,s.Uk)(" Back "),F=(0,s._)("div",{class:"text-h6 text-weight-light text-center"},"ðŸ‘",-1),N=(0,s._)("div",{class:"text-h6 text-weight-light text-center"},"All done! Let's get you on your way.",-1),Q=(0,s.Uk)(" Complete "),B=(0,s.Uk)(" Back ");function j(e,t,i,j,H,Y){const J=(0,s.up)("q-step"),X=(0,s.up)("q-card-section"),G=(0,s.up)("q-btn"),K=(0,s.up)("q-card-actions"),ee=(0,s.up)("q-card"),te=(0,s.up)("q-dialog"),ie=(0,s.up)("ConnectMetaverse"),se=(0,s.up)("q-input"),ae=(0,s.up)("q-select"),oe=(0,s.up)("q-option-group"),ne=(0,s.up)("q-icon"),re=(0,s.up)("q-form"),le=(0,s.up)("q-toggle"),ce=(0,s.up)("q-stepper");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s.Wm)(te,{modelValue:e.firstTimeWizardDialog,"onUpdate:modelValue":t[28]||(t[28]=t=>e.firstTimeWizardDialog=t),class:"overflow-hidden",persistent:"",square:"",seamless:""},{default:(0,s.w5)((()=>[(0,s._)("div",r,[(0,s.Wm)(a.uT,{name:"mode-fade",mode:"out-in",appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut",duration:e.MAIN_WIZARD_TRANSITION_TIME},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(ce,{modelValue:e.mainWizardStep,"onUpdate:modelValue":t[27]||(t[27]=t=>e.mainWizardStep=t),class:"mainWizardStepper overflow-hidden",ref:"stepper",animated:!0,"transition-prev":"slide-right","transition-next":"slide-left",style:{width:"100%"}},{default:(0,s.w5)((()=>[(0,s.Wm)(J,{name:1,title:"Welcome",done:e.mainWizardStep>1},{default:(0,s.w5)((()=>[l])),_:1},8,["done"]),(0,s.Wm)(J,{name:2,title:"Begin Wizard",caption:"Optional",done:e.mainWizardStep>2},{default:(0,s.w5)((()=>[(0,s.Wm)(ee,{class:"wizardCard"},{default:(0,s.w5)((()=>[(0,s.Wm)(X,null,{default:(0,s.w5)((()=>[c,d])),_:1}),(0,s.Wm)(K,{vertical:"",align:"right"},{default:(0,s.w5)((()=>[(0,s.Wm)(G,{onClick:t[0]||(t[0]=t=>e.$refs.stepper.next()),class:"q-mb-md",size:"md",outline:"","text-color":"white","icon-right":"chevron_right"},{default:(0,s.w5)((()=>[m])),_:1}),(0,s.Wm)(G,{onClick:t[1]||(t[1]=t=>e.skipWizardDialog=!0),size:"sm",flat:""},{default:(0,s.w5)((()=>[u])),_:1})])),_:1})])),_:1}),(0,s.Wm)(te,{modelValue:e.skipWizardDialog,"onUpdate:modelValue":t[4]||(t[4]=t=>e.skipWizardDialog=t)},{default:(0,s.w5)((()=>[(0,s.Wm)(ee,{class:"column no-wrap items-stretch q-pa-md",style:{background:"rgba(0, 0, 0, 0.95)"},dark:""},{default:(0,s.w5)((()=>[(0,s.Wm)(X,null,{default:(0,s.w5)((()=>[p])),_:1}),(0,s.Wm)(K,{align:"right"},{default:(0,s.w5)((()=>[(0,s.Wm)(G,{onClick:t[2]||(t[2]=t=>e.skipWizardDialog=!1)},{default:(0,s.w5)((()=>[_])),_:1}),(0,s.Wm)(G,{onClick:t[3]||(t[3]=t=>{e.mainWizardStep=e.FINAL_WIZARD_STEP,e.skipWizardDialog=!1}),size:"md"},{default:(0,s.w5)((()=>[h])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["done"]),(0,s.Wm)(J,{name:3,title:"Import",caption:"Optional",done:e.mainWizardStep>3},{default:(0,s.w5)((()=>[(0,s.Wm)(ee,{class:"wizardCard"},{default:(0,s.w5)((()=>[(0,s.Wm)(X,null,{default:(0,s.w5)((()=>[w,f])),_:1}),(0,s.Wm)(K,{vertical:"",align:"right"},{default:(0,s.w5)((()=>[(0,s.Wm)(G,{class:"q-mb-md",size:"md",outline:"",disabled:"","text-color":"white","icon-right":"upload"},{default:(0,s.w5)((()=>[g])),_:1}),(0,s.Wm)(G,{onClick:t[5]||(t[5]=t=>e.$refs.stepper.next()),class:"q-mb-md",size:"sm",outline:"","text-color":"white","icon-right":"chevron_right"},{default:(0,s.w5)((()=>[v])),_:1}),(0,s.Wm)(G,{onClick:t[6]||(t[6]=t=>e.$refs.stepper.previous()),size:"sm",flat:"",icon:"chevron_left"},{default:(0,s.w5)((()=>[y])),_:1})])),_:1})])),_:1})])),_:1},8,["done"]),(0,s.Wm)(J,{name:4,title:e.connectMetaverseSuccess?"Metaverse (Connected âœ”ï¸)":"Metaverse",caption:"Optional",done:e.mainWizardStep>4},{default:(0,s.w5)((()=>[(0,s.Wm)(ee,{class:"wizardCard"},{default:(0,s.w5)((()=>[(0,s.Wm)(X,null,{default:(0,s.w5)((()=>[S,W])),_:1}),(0,s.Wm)(K,{vertical:"",align:"right"},{default:(0,s.w5)((()=>[(0,s.Wm)(G,{onClick:e.connectMetaverseTriggered,class:"q-mb-md",size:"md",outline:!e.connectMetaverseSuccess,color:e.connectMetaverseSuccess?"green":"","text-color":"white","icon-right":e.connectMetaverseSuccess?"done":"cloud"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.connectMetaverseSuccess?"Connected":"Connect"),1)])),_:1},8,["onClick","outline","color","icon-right"]),(0,s.Wm)(G,{onClick:t[7]||(t[7]=t=>e.connectMetaverseSuccess?e.$refs.stepper.next():e.mainWizardStep=6),class:"q-mb-md",size:e.connectMetaverseSuccess?"md":"sm",outline:"","text-color":"white","icon-right":"chevron_right"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.connectMetaverseSuccess?"Next":"Skip"),1)])),_:1},8,["size"]),(0,s.Wm)(G,{onClick:t[8]||(t[8]=t=>e.$refs.stepper.previous()),size:"sm",flat:"",icon:"chevron_left"},{default:(0,s.w5)((()=>[M])),_:1})])),_:1})])),_:1}),(0,s.Wm)(te,{modelValue:e.connectMetaverseDialog,"onUpdate:modelValue":t[9]||(t[9]=t=>e.connectMetaverseDialog=t)},{default:(0,s.w5)((()=>[(0,s.Wm)(ee,{class:"column no-wrap items-stretch q-pa-md",style:{background:"rgba(0, 0, 0, 0.95)"},dark:""},{default:(0,s.w5)((()=>[(0,s.Wm)(ie,{onConnectionResult:e.onMetaverseConnectionAttempted},null,8,["onConnectionResult"])])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["title","done"]),(0,s.Wm)(J,{name:5,title:"Configure Metaverse",caption:"Recommended",done:e.mainWizardStep>5},{default:(0,s.w5)((()=>[(0,s.Wm)(ee,{class:"wizardCard"},{default:(0,s.w5)((()=>[(0,s.Wm)(X,null,{default:(0,s.w5)((()=>[z,k])),_:1}),(0,s.Wm)(X,null,{default:(0,s.w5)((()=>[(0,s.Wm)(se,{modelValue:e.domainLabel,"onUpdate:modelValue":t[10]||(t[10]=t=>e.domainLabel=t),filled:"",dark:"",label:"Label",hint:"Enter a nickname for your Domain.","lazy-rules":"",rules:[e=>e&&e.length>0||"Please enter a label."]},null,8,["modelValue","rules"])])),_:1}),(0,s.Wm)(K,{vertical:"",align:"right"},{default:(0,s.w5)((()=>[(0,s.Wm)(G,{onClick:e.saveMetaverseConfiguration,class:"q-mb-md",size:"md",outline:"","text-color":"white","icon-right":"chevron_right"},{default:(0,s.w5)((()=>[E])),_:1},8,["onClick"]),(0,s.Wm)(G,{onClick:t[11]||(t[11]=t=>e.$refs.stepper.previous()),size:"sm",flat:"",icon:"chevron_left"},{default:(0,s.w5)((()=>[x])),_:1})])),_:1})])),_:1})])),_:1},8,["done"]),(0,s.Wm)(J,{name:6,title:"Access",caption:"Recommended",done:e.mainWizardStep>6},{default:(0,s.w5)((()=>[(0,s.Wm)(ee,{class:"wizardCard"},{default:(0,s.w5)((()=>[(0,s.Wm)(X,null,{default:(0,s.w5)((()=>[b])),_:1}),(0,s.wy)((0,s.Wm)(X,null,{default:(0,s.w5)((()=>[C,(0,s.Wm)(ae,{label:"Metaverse usernames (press enter)",filled:"",modelValue:e.administratorsListSecurityModel,"onUpdate:modelValue":t[12]||(t[12]=t=>e.administratorsListSecurityModel=t),"use-input":"","use-chips":"",multiple:"","hide-dropdown-icon":"","input-debounce":"0","new-value-mode":"add-unique"},null,8,["modelValue"])])),_:1},512),[[a.F8,e.connectMetaverseSuccess]]),(0,s.Wm)(X,null,{default:(0,s.w5)((()=>[Z,(0,s.Wm)(oe,{modelValue:e.connectionSecurityModel,"onUpdate:modelValue":t[13]||(t[13]=t=>e.connectionSecurityModel=t),options:e.connectionSecurityOptions,color:"primary",type:"checkbox"},null,8,["modelValue","options"])])),_:1}),(0,s.Wm)(X,null,{default:(0,s.w5)((()=>[T,(0,s.Wm)(oe,{modelValue:e.rezSecurityModel,"onUpdate:modelValue":t[14]||(t[14]=t=>e.rezSecurityModel=t),options:e.rezSecurityOptions,color:"primary",type:"checkbox"},null,8,["modelValue","options"])])),_:1}),(0,s.Wm)(K,{vertical:"",align:"right"},{default:(0,s.w5)((()=>[(0,s.Wm)(G,{onClick:e.saveSecuritySettings,class:"q-mb-md",size:"md",outline:"","text-color":"white","icon-right":"chevron_right"},{default:(0,s.w5)((()=>[A])),_:1},8,["onClick"]),(0,s.Wm)(G,{onClick:t[15]||(t[15]=t=>e.connectMetaverseSuccess?e.$refs.stepper.previous():e.mainWizardStep=4),size:"sm",flat:"",icon:"chevron_left"},{default:(0,s.w5)((()=>[D])),_:1})])),_:1})])),_:1})])),_:1},8,["done"]),(0,s.Wm)(J,{name:7,title:"Administrator",caption:"Highly Recommended",done:e.mainWizardStep>7},{default:(0,s.w5)((()=>[(0,s.Wm)(ee,{class:"wizardCard"},{default:(0,s.w5)((()=>[(0,s.Wm)(X,null,{default:(0,s.w5)((()=>[V,R])),_:1}),(0,s.Wm)(X,null,{default:(0,s.w5)((()=>[(0,s.Wm)(re,{onSubmit:e.onAdminStepSubmit,onReset:e.onAdminStepReset,class:"q-gutter-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(se,{modelValue:e.username,"onUpdate:modelValue":t[16]||(t[16]=t=>e.username=t),filled:"",label:"Username",hint:"Enter your username.","lazy-rules":"",rules:[e=>e&&e.length>0||"Please enter a username."]},null,8,["modelValue","rules"]),(0,s.Wm)(se,{modelValue:e.password,"onUpdate:modelValue":t[18]||(t[18]=t=>e.password=t),filled:"",label:"Password",type:e.showPassword?"text":"password",hint:"Enter your password.","lazy-rules":"",rules:[e=>e&&e.length>0||"Please enter a password."]},{append:(0,s.w5)((()=>[(0,s.Wm)(ne,{name:e.showPassword?"visibility":"visibility_off",class:"cursor-pointer",onClick:t[17]||(t[17]=t=>e.showPassword=!e.showPassword)},null,8,["name"])])),_:1},8,["modelValue","type","rules"]),(0,s.Wm)(se,{modelValue:e.confirmPassword,"onUpdate:modelValue":t[20]||(t[20]=t=>e.confirmPassword=t),filled:"",label:"Confirm Password",type:e.showConfirmPassword?"text":"password",hint:"Enter your password again.","lazy-rules":"",rules:[t=>t&&t.length>0&&t===e.password||"Please ensure your passwords match."]},{append:(0,s.w5)((()=>[(0,s.Wm)(ne,{name:e.showConfirmPassword?"visibility":"visibility_off",class:"cursor-pointer",onClick:t[19]||(t[19]=t=>e.showConfirmPassword=!e.showConfirmPassword)},null,8,["name"])])),_:1},8,["modelValue","type","rules"]),(0,s._)("div",U,[(0,s.Wm)(G,{label:"Clear",type:"reset",size:"md",class:"q-mb-md q-mr-sm",flat:""}),(0,s.Wm)(G,{label:"Save",type:"submit",class:"q-mb-md",size:"md",outline:"","text-color":"white","icon-right":"key"})])])),_:1},8,["onSubmit","onReset"])])),_:1}),(0,s.Wm)(K,{vertical:"",align:"right"},{default:(0,s.w5)((()=>[(0,s.Wm)(G,{onClick:t[21]||(t[21]=t=>e.$refs.stepper.next()),class:"q-mb-md",size:"sm",outline:"","text-color":"white","icon-right":"chevron_right"},{default:(0,s.w5)((()=>[q])),_:1}),(0,s.Wm)(G,{onClick:t[22]||(t[22]=t=>e.$refs.stepper.previous()),size:"sm",flat:"",icon:"chevron_left"},{default:(0,s.w5)((()=>[L])),_:1})])),_:1})])),_:1})])),_:1},8,["done"]),(0,s.Wm)(J,{name:8,title:"Performance",caption:"",done:e.mainWizardStep>8},{default:(0,s.w5)((()=>[(0,s.Wm)(ee,{class:"wizardCard"},{default:(0,s.w5)((()=>[(0,s.Wm)(X,null,{default:(0,s.w5)((()=>[I,$])),_:1}),(0,s.Wm)(X,null,{default:(0,s.w5)((()=>[(0,s.Wm)(le,{modelValue:e.performanceMode,"onUpdate:modelValue":t[23]||(t[23]=t=>e.performanceMode=t),"checked-icon":"check",color:"red",label:"Performance Mode","unchecked-icon":"clear"},null,8,["modelValue"])])),_:1}),(0,s.Wm)(K,{vertical:"",align:"right"},{default:(0,s.w5)((()=>[(0,s.Wm)(G,{onClick:t[24]||(t[24]=t=>e.$refs.stepper.next()),class:"q-mb-md",size:"md",outline:"","text-color":"white","icon-right":"chevron_right"},{default:(0,s.w5)((()=>[P])),_:1}),(0,s.Wm)(G,{onClick:t[25]||(t[25]=t=>e.$refs.stepper.previous()),size:"sm",flat:"",icon:"chevron_left"},{default:(0,s.w5)((()=>[O])),_:1})])),_:1})])),_:1})])),_:1},8,["done"]),(0,s.Wm)(J,{name:9,title:"Done!",caption:"",done:e.mainWizardStep>9},{default:(0,s.w5)((()=>[(0,s.Wm)(ee,{class:"wizardCard"},{default:(0,s.w5)((()=>[(0,s.Wm)(X,null,{default:(0,s.w5)((()=>[F,N])),_:1}),(0,s.Wm)(K,{vertical:"",align:"right"},{default:(0,s.w5)((()=>[(0,s.Wm)(G,{onClick:e.completeWizard,class:"q-mb-md",size:"md",outline:"","text-color":"white","icon-right":"chevron_right"},{default:(0,s.w5)((()=>[Q])),_:1},8,["onClick"]),(0,s.Wm)(G,{onClick:t[26]||(t[26]=t=>e.$refs.stepper.previous()),size:"sm",flat:"",icon:"chevron_left"},{default:(0,s.w5)((()=>[B])),_:1})])),_:1})])),_:1})])),_:1},8,["done"])])),_:1},8,["modelValue"]),[[a.F8,e.mainWizard]])])),_:1},8,["duration"])])])),_:1},8,["modelValue"])])}(0,s.Cn)();i(7280);var H=i(1959);const Y=(0,s._)("div",{class:"row no-wrap items-center"},[(0,s._)("div",{class:"col text-h4 ellipsis"}," Metaverse ")],-1);function J(e,t,i,a,o,n){const r=(0,s.up)("q-card-section"),l=(0,s.up)("q-separator"),c=(0,s.up)("MetaverseLogin");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[Y])),_:1}),(0,s.Wm)(l),(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c,{onLoginResult:n.onLoginAttempt},null,8,["onLoginResult"])])),_:1})],64)}const X={align:"right"};function G(e,t,i,a,o,n){const r=(0,s.up)("q-input"),l=(0,s.up)("q-icon"),c=(0,s.up)("q-btn"),d=(0,s.up)("q-form");return(0,s.wg)(),(0,s.j4)(d,{onSubmit:n.onSubmit,onReset:n.onReset,class:"q-gutter-md",autocomplete:e.AUTOCOMPLETE},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{modelValue:e.username,"onUpdate:modelValue":t[0]||(t[0]=t=>e.username=t),filled:"",dark:"",label:"Username",hint:"Enter your username.","lazy-rules":"",rules:[e=>e&&e.length>0||"Please enter a username."]},null,8,["modelValue","rules"]),(0,s.Wm)(r,{modelValue:e.password,"onUpdate:modelValue":t[2]||(t[2]=t=>e.password=t),filled:"",dark:"",label:"Password",type:e.showPassword?"text":"password",hint:"Enter your password.","lazy-rules":"",rules:[e=>e&&e.length>0||"Please enter a password."]},{append:(0,s.w5)((()=>[(0,s.Wm)(l,{name:e.showPassword?"visibility":"visibility_off",class:"cursor-pointer",onClick:t[1]||(t[1]=t=>e.showPassword=!e.showPassword)},null,8,["name"])])),_:1},8,["modelValue","type","rules"]),(0,s._)("div",X,[(0,s.Wm)(c,{label:"Reset",type:"reset",color:"primary",flat:"",class:"q-mr-sm"}),(0,s.Wm)(c,{label:"Login",type:"submit",color:"primary"})])])),_:1},8,["onSubmit","onReset","autocomplete"])}var K=i(8563);const ee=i(52),te={name:"MetaverseLogin",emits:["loginResult"],data:()=>({username:"",password:"",showPassword:!1,DEFAULT_METAVERSE_URL:"https://metaverse.vircadia.com/live",AUTOCOMPLETE:!1}),methods:{async onSubmit(){const e=await this.retrieveMetaverseUrl(),t=await this.attemptLogin(e,this.username,this.password);this.$emit("loginResult",{success:t.success,metaverse:e,data:t.response})},async retrieveMetaverseUrl(){return new Promise((e=>{ee.get("/api/metaverse_info").then((t=>{K.Z.info(K.Z.types.METAVERSE,`Retrieved Metaverse URL ${t.data.metaverse_url}.`),e(t.data.metaverse_url)}),(t=>{K.Z.error(K.Z.types.METAVERSE,`Failed to retrieve Metaverse URL, using default URL ${this.DEFAULT_METAVERSE_URL} instead. Error: ${t}`),e(this.DEFAULT_METAVERSE_URL)}))}))},async attemptLogin(e,t,i){return K.Z.info(K.Z.types.METAVERSE,`Attempting to login as ${t}.`),new Promise((s=>{ee.post(`${e}/oauth/token`,{grant_type:"password",scope:"owner",username:t,password:i}).then((e=>{K.Z.info(K.Z.types.METAVERSE,`Successfully got key and details for ${t}.`),s({success:!0,response:e.data})}),(e=>{K.Z.error(K.Z.types.METAVERSE,`Failed to get key and details for ${t}.`),e.response&&e.response.data?s({success:!1,response:e.response.data}):s(e?{success:!1,response:e}:{success:!1,response:"Unknown reason."})}))}))},onReset(){this.username="",this.password=""}}};var ie=i(8689),se=i(4842),ae=i(4554),oe=i(8240),ne=i(7518),re=i.n(ne);te.render=G;const le=te;re()(te,"components",{QForm:ie.Z,QInput:se.Z,QIcon:ae.Z,QBtn:oe.Z});const ce=i(52),de={name:"ConnectMetaverse",components:{MetaverseLogin:le},emits:["connectionResult"],data:()=>({}),methods:{onLoginAttempt(e){!0===e.success?(K.Z.info(K.Z.types.METAVERSE,`Successfully logged in as ${e.data.account_name} for Metaverse linking.`),ce.post(`${e.metaverse}/api/v1/token/new`,{},{params:{scope:"domain"},headers:{Authorization:`Bearer ${e.data.access_token}`}}).catch((e=>{K.Z.error(K.Z.types.METAVERSE,"Failed to link server with Metaverse."),this.$q.notify({type:"negative",textColor:"white",icon:"warning",message:`Metaverse link attempt failed. ${e}`})})).then((async e=>{K.Z.info(K.Z.types.METAVERSE,"Successfully got Domain token for Metaverse linking.");const t={metaverse:{access_token:e.data.data.token}},i=await this.commitSettings(t);!0===i?(K.Z.info(K.Z.types.METAVERSE,"Successfully committed Domain server access token for the Metaverse."),this.$q.notify({type:"positive",textColor:"white",icon:"cloud_done",message:"Successfully linked your server to the Metaverse."}),this.$emit("connectionResult",{success:!0})):(K.Z.error(K.Z.types.METAVERSE,"Failed to link server with Metaverse: Could not commit token to settings."),this.$q.notify({type:"negative",textColor:"white",icon:"warning",message:"Metaverse link attempt failed because the settings were unable to be saved."}),this.$emit("connectionResult",{success:!1}))}))):this.$q.notify({type:"negative",textColor:"white",icon:"warning",message:`Login attempt failed: ${e.data.error}`})},commitSettings(e){return ce.post("/settings.json",JSON.stringify(e)).then((()=>(K.Z.info(K.Z.types.DOMAIN,"Successfully committed settings."),!0))).catch((e=>(K.Z.error(K.Z.types.DOMAIN,`Failed to commit settings to Domain: ${e}`),!1)))}}};var me=i(5589),ue=i(5869);de.render=J;const pe=de;re()(de,"components",{QCardSection:me.Z,QSeparator:ue.Z});const _e=i(52),he=i(2749),we=(0,s.aZ)({name:"Index",components:{ConnectMetaverse:pe},data(){return{mainOverlay:!0,firstTimeWizardDialog:!0,welcomeText:!0,mainWizard:!0,mainWizardStep:(0,H.iH)(1),skipWizardDialog:!1,connectMetaverseSuccess:!1,connectMetaverseDialog:!1,domainLabel:"",administratorsListSecurityModel:[],connectionSecurityModel:(0,H.iH)(["everyone"]),connectionSecurityOptions:[{label:"Friends",value:"friends"},{label:"Logged In",value:"logged-in"},{label:"Everyone (anonymous)",value:"everyone"}],rezSecurityModel:(0,H.iH)(["friends"]),rezSecurityOptions:[{label:"Friends",value:"friends"},{label:"Logged In",value:"logged-in"},{label:"Everyone (anonymous)",value:"everyone"}],username:"",password:"",confirmPassword:"",showPassword:!1,showConfirmPassword:!1,performanceMode:!0,starterContentToggle:!0,WELCOME_TEXT_TIMEOUT:4500,MAIN_WIZARD_TRANSITION_TIME:1e3,DEFAULT_METAVERSE_URL:"https://metaverse.vircadia.com/live",FINAL_WIZARD_STEP:9,COMPLETE_WIZARD_REDIRECT_DELAY:4e3}},mounted(){setTimeout((()=>{this.mainWizardStep++}),this.WELCOME_TEXT_TIMEOUT)},methods:{connectMetaverseTriggered(){this.connectMetaverseDialog=!0},onMetaverseConnectionAttempted(e){this.connectMetaverseDialog=!1,!0===e.success&&(this.connectMetaverseSuccess=!0,this.mainWizardStep++)},saveMetaverseConfiguration(){this.mainWizardStep++,_e.post("/api/domains",{domain:{label:this.domainLabel}},{params:{label:this.domainLabel},headers:{"content-type":"application/x-www-form-urlencoded;charset=utf-8"}}).then((e=>{K.Z.info(K.Z.types.METAVERSE,"Successfully configured Domain with Metaverse."),console.info("received",e);const t={metaverse:{automatic_networking:"full",id:e.data.domain.domainId},descriptors:{world_name:this.domainLabel}};this.commitMetaverseConfig(t)})).catch((e=>{K.Z.error(K.Z.types.METAVERSE,`Failed to configure Domain with Metaverse: ${e}`),this.$q.notify({type:"negative",textColor:"white",icon:"warning",message:`Failed to label your Domain on the Metaverse: ${e}`})}))},async commitMetaverseConfig(e){const t=await this.commitSettings(e);!0===t?(K.Z.info(K.Z.types.METAVERSE,"Successfully committed Domain server config for the Metaverse."),this.$q.notify({type:"positive",textColor:"white",icon:"cloud_done",message:"Successfully labeled your Domain on your Metaverse account."})):(K.Z.error(K.Z.types.METAVERSE,"Failed to configure server with Metaverse: Could not commit config to settings."),this.$q.notify({type:"negative",textColor:"white",icon:"warning",message:"Domain label with Metaverse attempt failed because the settings were unable to be saved."}))},async saveSecuritySettings(){const e=this.connectionSecurityModel.includes("friends"),t=this.rezSecurityModel.includes("friends"),i=this.connectionSecurityModel.includes("logged-in"),s=this.rezSecurityModel.includes("logged-in"),a=this.connectionSecurityModel.includes("everyone"),o=this.rezSecurityModel.includes("everyone"),n=!0,r=[];this.administratorsListSecurityModel.forEach((e=>{r.push({id_can_adjust_locks:!0,id_can_connect:!0,id_can_connect_past_max_capacity:!0,id_can_get_and_set_private_user_data:!0,id_can_kick:!0,id_can_replace_content:!0,id_can_rez:!0,id_can_rez_avatar_entities:!0,id_can_rez_certified:!0,id_can_rez_tmp:!0,id_can_rez_tmp_certified:!0,id_can_write_to_asset_server:!0,permissions_id:e})}));const l={security:{permissions:r,standard_permissions:[{id_can_connect:a,id_can_rez_avatar_entities:a,id_can_rez:o,id_can_rez_certified:o,id_can_rez_tmp:o,id_can_rez_tmp_certified:o,permissions_id:"anonymous"},{id_can_connect:e,id_can_rez_avatar_entities:e,id_can_rez:t,id_can_rez_certified:t,id_can_rez_tmp:t,id_can_rez_tmp_certified:t,permissions_id:"friends"},{id_can_connect:i,id_can_rez_avatar_entities:i,id_can_rez:s,id_can_rez_certified:s,id_can_rez_tmp:s,id_can_rez_tmp_certified:s,permissions_id:"logged-in"},{id_can_adjust_locks:n,id_can_connect:n,id_can_rez_avatar_entities:n,id_can_connect_past_max_capacity:n,id_can_kick:n,id_can_replace_content:n,id_can_rez:n,id_can_rez_certified:n,id_can_rez_tmp:n,id_can_rez_tmp_certified:n,id_can_write_to_asset_server:n,permissions_id:"localhost"}]}},c=await this.commitSettings(l);!0===c?(K.Z.info(K.Z.types.METAVERSE,"Successfully saved Domain server security settings."),this.$q.notify({type:"positive",textColor:"white",icon:"cloud_done",message:"Successfully saved your security settings."})):(K.Z.error(K.Z.types.METAVERSE,"Failed to save Domain server security settings."),this.$q.notify({type:"negative",textColor:"white",icon:"warning",message:"Failed to save your security settings."})),this.mainWizardStep++},async onAdminStepSubmit(){const e={security:{http_username:this.username,http_password:he.hex(this.confirmPassword)}},t=await this.commitSettings(e);!0===t?(K.Z.info(K.Z.types.METAVERSE,"Successfully saved Domain server administrator details."),this.$q.notify({type:"positive",textColor:"white",icon:"cloud_done",message:"Successfully saved your administrator credentials."}),this.mainWizardStep++):(K.Z.error(K.Z.types.METAVERSE,"Failed to save Domain server administrator details."),this.$q.notify({type:"negative",textColor:"white",icon:"warning",message:"Failed to save your administrator credentials."}))},onAdminStepReset(){this.username="",this.password="",this.confirmPassword=""},async completeWizard(){const e={wizard:{steps_completed:"0",completed_once:!0}},t=await this.commitSettings(e);!0===t?K.Z.info(K.Z.types.METAVERSE,"Successfully saved wizard completion."):K.Z.error(K.Z.types.METAVERSE,"Failed to save wizard completion."),this.redirectToSettings()},redirectToSettings(){const e="/settings"+location.search;this.firstTimeWizardDialog=!1,this.$q.loading.show({message:"Stand by..."}),setTimeout((()=>{location.href=e}),this.COMPLETE_WIZARD_REDIRECT_DELAY)},commitSettings(e){return _e.post("/settings.json",JSON.stringify(e)).then((()=>(K.Z.info(K.Z.types.DOMAIN,"Successfully committed settings."),!0))).catch((e=>(K.Z.error(K.Z.types.DOMAIN,`Failed to commit settings to Domain: ${e}`),!1)))}},watch:{async mainWizardStep(){const e={wizard:{steps_completed:this.mainWizardStep.toString()}},t=await this.commitSettings(e);!0===t?K.Z.info(K.Z.types.DOMAIN,"Successfully committed steps completed to Domain server settings."):K.Z.error(K.Z.types.DOMAIN,"Failed to commit steps completed to Domain server settings.")},async performanceMode(){const e={audio_threading:{auto_threads:this.performanceMode},avatar_mixer:{auto_threads:this.performanceMode}},t=await this.commitSettings(e);!0===t?(K.Z.info(K.Z.types.DOMAIN,"Successfully saved performance mode setting."),this.$q.notify({type:"positive",textColor:"white",icon:"cloud_done",message:"Successfully saved performance mode setting."})):(K.Z.error(K.Z.types.DOMAIN,"Failed to save performance mode setting."),this.$q.notify({type:"negative",textColor:"white",icon:"warning",message:"Failed to save performance mode setting."}))}}});var fe=i(3518),ge=i(4390),ve=i(4340),ye=i(151),Se=i(9367),We=i(1319),Me=i(6359),ze=i(8886),ke=i(4027);we.render=j,we.__scopeId="data-v-adfd497e";const Ee=we;re()(we,"components",{QStepper:fe.Z,QDialog:ge.Z,QStep:ve.Z,QCard:ye.Z,QCardSection:me.Z,QCardActions:Se.Z,QBtn:oe.Z,QInput:se.Z,QSelect:We.Z,QOptionGroup:Me.Z,QForm:ie.Z,QIcon:ae.Z,QToggle:ze.Z,QImg:ke.Z})}}]);